{% extends 'base.html' %}
{% block content %}

<section class="vh-100 gradient-custom">
    <div class="container h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-12 col-md-8 col-lg-6 col-xl-5">
                <div class="card bg-dark text-white" style="border-radius: 1rem;">
                    <div class="card-body pr-5 pl-5 text-center">

                        <form method="POST" action="">
                            {{ form.hidden_tag() }}

                            <h2 class="fw-bold mb-2 text-uppercase">CRIE SUA CONTA</h2>
                            <p class="text-white-50 mb-5 text-center">Por favor faça seu cadastro!</p>

                            <div class="form-outline form-white mb-4">
                                {{ form.nome (class="form-control form-control-lg")}}
                            </div>

                            <div class="form-outline form-white mb-4">
                                {{ form.username (class="form-control form-control-lg")}}
                            </div>

                            <div class="form-outline form-white mb-4">
                                {{ form.password (class="form-control form-control-lg", id="senha")}}

                            </div>
                            <div class="form-outline form-white mb-4">
                                <input type="password" id="confirmaSenha" name="confirmaSenha"
                                    class="form-control form-control-lg" placeholder="Confirme sua Senha" />
                            </div>

                            <div class="form-outline form-white mb-4">
                                <select name="dep" value="{{ request.form['dep'] }}"
                                    class="form-control form-control form-control-lg" required>
                                    <option value="" disabled selected> Selecione um departamento</option>
                                    {% for setor in setores %}
                                    <option value="{{ setor['setor'] }}">{{ setor['setor'] }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <br>
                            {{ form.submit (class="btn btn-outline-light btn-lg px-5")}}
                        </form>
                        <br>
                        <p class="">Já é cadastrado? <a href="{{ url_for('login')}}" class="text-white-50 fw-bold">Entrar</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    let senha = document.getElementById('senha');
    let senhaC = document.getElementById('confirmaSenha');

    function validarSenha() {
        if (senha.value != senhaC.value) {
            senhaC.setCustomValidity("Senhas diferentes!");
            senhaC.reportValidity();
            return false;
        } else {
            senhaC.setCustomValidity("");
            return true;
        }
    }

    // verificar também quando o campo for modificado, para que a mensagem suma quando as senhas forem iguais
    senhaC.addEventListener('input', validarSenha);
</script>



{% endblock %}


<!-- <div class="form-outline form-white mb-4">
                                {{ form.departamento (class="form-control form-control-lg")}}
                                    
                            </div> -->